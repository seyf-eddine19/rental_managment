{% extends 'base.html' %}

{% block content %}
  <div class="container mt-4">
    <!-- Header with text alignment and a modern title -->
    <div class="d-flex justify-content-between align-items-center border-bottom pb-2 mb-4">
      <h1 class="text-end">تفاصيل {{ model_verbose_name }}</h1>
    </div>

    <!-- Flash messages section with a cleaner design -->
    {% if messages %}
      <div class="alert-container">
        {% for message in messages %}
          <div class="alert {% if message.tags == 'success' %}alert-success{% elif message.tags == 'error' %}alert-danger{% endif %} alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Object Details Section -->
    <div class="card shadow border-1 mb-4">
      <div class="card-body">
        <h5 class="card-title mb-4 text-primary">معلومات {{ model_verbose_name }}</h5>
        <div class="row mb-3">
          {% for field_name, field_value in fields %}
            <div class="col-md-6 mb-2">
              <p><strong>{{ field_name }}:</strong> <span class="text-muted">{{ field_value }}</span></p>
            </div>
          {% endfor %}
        </div>
        <div class="d-flex justify-content-end">
          <a href="{% url model_name|lower|add:'_update' object.pk %}" class="btn btn-warning btn-sm mx-1">تعديل</a>
          <a href="{% url model_name|lower|add:'_delete' object.pk %}" class="btn btn-danger btn-sm mx-1">حذف</a>
          <a href="{% url model_name|lower|add:'_list' %}" class="btn btn-outline-secondary btn-sm mx-1">الرجوع إلى القائمة</a>
        </div>
      </div>
    </div>
    <div class="card shadow border-1 mb-4">
      <div class="card-body">
        <h5 class="card-title mb-4 text-primary">قائمة الشقق</h5>
        
        <div style="overflow-x: auto; max-width: 100%;">
          <table id="apartmentsTable" class="table table-responsive table-striped table-hover">
            <thead class="table-dark">
              <tr>
                <th>رقم الشقة</th>
                <th>رقم العمارة</th>
                <th>رقم الطابق</th>
                <th>عدد الغرف</th>
                <th>عداد الكهرباء</th>
                <th>عداد الماء</th>
                <th>الحالة</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              {% for apartment in object.apartments.all %}
              <tr>
                <td>{{ apartment.apartment_number }}</td>
                <td>{{ apartment.building }}</td>
                <td>{{ apartment.floor_number }}</td>
                <td>{{ apartment.num_of_rooms }}</td>
                <td>{{ apartment.water_meter_number }}</td>
                <td>{{ apartment.electricity_meter_number}}</td>
                <td>{{ apartment.status }}</td>
                <td>
                  <a href="{% url 'apartment_detail' apartment.pk %}" class="btn btn-outline-info btn-sm">
                    <i class="fas fa-eye"></i>
                  </a>
                  <a href="{% url 'apartment_update' apartment.pk %}" class="btn btn-outline-warning btn-sm">
                    <i class="fas fa-edit"></i>
                  </a>
                  <a href="{% url 'apartment_delete' apartment.pk %}" class="btn btn-outline-danger btn-sm">
                    <i class="fas fa-trash-alt"></i>
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
